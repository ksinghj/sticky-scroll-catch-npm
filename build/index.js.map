{"mappings":"uBACAA,QAAQC,YAAa,mBCCwE,IACnE,SAAUC,GAChC,IAAIC,EAAeC,OAAOC,QAAUD,OAAOE,YAI3C,OAHgBJ,EAAIK,cACGH,OAAOI,YAAcN,EAAIO,wBAAwBC,KACnBP,KAIxC,SAAUD,EAAKS,QACR,IAAhBA,IAA0BA,EAAc,uBAC5CT,EAAIU,MAAMC,OAAS,KACnB,IAAK,IAAIC,EAAIZ,EAAIa,UAAUC,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAChD,IAAIG,EAAYf,EAAIa,UAAUD,GAC1BG,EAAUC,WAAWP,IACrBT,EAAIa,UAAUI,OAAOF,OAKhB,CACbG,OAAQ,+BACRC,kBAAmB,gCACnBC,aAAc,6BACdC,SAAU,gCACVC,WAAY,kCACZC,WAAY,oCACZC,iBAAkB,kCAED,SAAUC,EAAYzB,GACvC0B,EAAmB1B,GACnBA,EAAIa,UAAUc,IAAIF,ID5BtB,IAUIG,EAVAC,EAASC,SAASC,cAAc,2BAChCC,EAASH,EAAOI,cAChBC,EAAeL,EAAOxB,aAEtB8B,EAAeH,EAAO3B,aAOtB+B,GAAa,IACO,WAUpB,GATIC,EAA4BR,KAC5BS,EAAuBC,EAAepB,kBAAmBU,GACrDD,IACAQ,GAAa,IAEjBC,EAA4BL,IAC5BM,EAAuBC,EAAenB,aAAcS,IAGnDQ,EAA4BR,IAAWD,IAAoBQ,EAAY,CACxE,IAEII,EAFaL,EAAeD,GACJL,EAAOtB,wBAAwBC,IAAMwB,EAAOzB,wBAAwBC,KAEhG8B,EAAuBC,EAAelB,SAAUQ,GAChDA,EAAOnB,MAAMC,OAAS6B,EAAmB,KACzCJ,GAAa,EAGjB,IAAKR,GAAmBC,EAAOhB,UAAU4B,SAAS,uCAAyCL,EAAY,CAG/FI,EAFaL,EAAeD,GACJL,EAAOtB,wBAAwBC,IAAMwB,EAAOzB,wBAAwBC,KAEhG8B,EAAuBC,EAAejB,WAAYO,GAClDA,EAAOnB,MAAMC,OAAS6B,EAAmB,KACzCJ,GAAa,EAEZR,IACDQ,GAAa,GAEbP,EAAOtB,wBAAwBC,IAAM,GAAKoB,GAC1CU,EAAuBC,EAAehB,WAAYM,GAElDG,EAAOzB,wBAAwBC,IAAM,GACrC8B,EAAuBC,EAAerB,OAAQW,GAElD3B,OAAOwC,SAAW,WAEdd,EAAkBe,KAAKC,UAAYD,KAAKxC,QACxCwC,KAAKC,UAAYD,KAAKxC,UAG9BL,QAAA,QAAA+C","sources":["./src/main.js","./src/utils/index.js"],"sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar utils_1 = require(\"./utils\");\n// import debounce from './utils/debounce'\nrequire(\"./index.css\");\nvar target = document.querySelector('.js-sticky-scroll-catch');\nvar parent = target.parentElement;\nvar targetHeight = target.offsetHeight;\n// let targetWidth: number = target.offsetWidth\nvar parentHeight = parent.offsetHeight;\n// let parentWidth: number = parent.offsetWidth\n// TODO: calc width of parent - width of target\n// use that val as left: property for fixed and absolute pos\n// let leftSpace = parentWidth - targetWidth - target.getBoundingClientRect().left\n// target.style.left = `${leftSpace}px`\nvar scrollDirection;\nvar isCatchPos = false;\nvar stickyScrollCatch = function () {\n    if (utils_1.isElmScrolledBottom(target)) {\n        utils_1.setActiveState(utils_1.STATES.SCROLL_DOWN_CATCH, target);\n        if (scrollDirection)\n            isCatchPos = true;\n    }\n    if (utils_1.isElmScrolledBottom(parent)) {\n        utils_1.setActiveState(utils_1.STATES.SCROLL_BREAK, target);\n    }\n    // handle scroll up and 'catch' so scrolls with window\n    if (!utils_1.isElmScrolledBottom(target) && scrollDirection && !isCatchPos) {\n        var YAxisSpace = parentHeight - targetHeight;\n        var topDistanceFromParent = target.getBoundingClientRect().top - parent.getBoundingClientRect().top;\n        var bottomYAxisSpace = YAxisSpace - topDistanceFromParent;\n        utils_1.setActiveState(utils_1.STATES.UPSCROLL, target);\n        target.style.bottom = bottomYAxisSpace + \"px\";\n        isCatchPos = true;\n    }\n    // handle scroll up and 'catch' so scrolls with window DOWNSCROLL catch\n    if (!scrollDirection && target.classList.contains('sticky-scroll-catch--scrolled-top') && !isCatchPos) {\n        var YAxisSpace = parentHeight - targetHeight;\n        var topDistanceFromParent = target.getBoundingClientRect().top - parent.getBoundingClientRect().top;\n        var bottomYAxisSpace = YAxisSpace - topDistanceFromParent;\n        utils_1.setActiveState(utils_1.STATES.DOWNSCROLL, target);\n        target.style.bottom = bottomYAxisSpace + \"px\";\n        isCatchPos = true;\n    }\n    if (!scrollDirection)\n        isCatchPos = false;\n    // fix to top\n    if (target.getBoundingClientRect().top > 0 && scrollDirection) {\n        utils_1.setActiveState(utils_1.STATES.SCROLL_TOP, target);\n    }\n    if (parent.getBoundingClientRect().top > 0) {\n        utils_1.setActiveState(utils_1.STATES.INITAL, target);\n    }\n    window.onscroll = function () {\n        // print \"false\" if direction is down and \"true\" if up // creds IT VLOG https://stackoverflow.com/questions/31223341/detecting-scroll-direction\n        scrollDirection = this.oldScroll > this.scrollY;\n        this.oldScroll = this.scrollY;\n    };\n};\nexports[\"default\"] = stickyScrollCatch;\n","\"use strict\";\nexports.__esModule = true;\nexports.setActiveState = exports.STATES = exports.resetStyle = exports.isElmScrolledBottom = void 0;\nvar isElmScrolledBottom = function (elm) {\n    var bottomScroll = window.scrollY + window.innerHeight;\n    var elmHeight = elm.offsetHeight;\n    var elmDistanceToTop = window.pageYOffset + elm.getBoundingClientRect().top;\n    var isScrolledToEnd = elmHeight + elmDistanceToTop < bottomScroll;\n    return isScrolledToEnd;\n};\nexports.isElmScrolledBottom = isElmScrolledBottom;\nvar resetStyle = function (elm, classPrefix) {\n    if (classPrefix === void 0) { classPrefix = 'sticky-scroll-catch'; }\n    elm.style.bottom = null;\n    for (var i = elm.classList.length - 1; i >= 0; i--) {\n        var className = elm.classList[i];\n        if (className.startsWith(classPrefix)) {\n            elm.classList.remove(className);\n        }\n    }\n};\nexports.resetStyle = resetStyle;\nexports.STATES = {\n    INITAL: 'sticky-scroll-catch--initial',\n    SCROLL_DOWN_CATCH: 'sticky-scroll-catch--scrolled',\n    SCROLL_BREAK: 'sticky-scroll-catch--break',\n    UPSCROLL: 'sticky-scroll-catch--upscroll',\n    DOWNSCROLL: 'sticky-scroll-catch--downscroll',\n    SCROLL_TOP: 'sticky-scroll-catch--scrolled-top',\n    SCROLL_TOP_BREAK: 'sticky-scroll-catch--initial'\n};\nvar setActiveState = function (classToAdd, elm) {\n    exports.resetStyle(elm);\n    elm.classList.add(classToAdd);\n};\nexports.setActiveState = setActiveState;\n"],"names":["exports","__esModule","elm","bottomScroll","window","scrollY","innerHeight","offsetHeight","pageYOffset","getBoundingClientRect","top","classPrefix","style","bottom","i","classList","length","className","startsWith","remove","INITAL","SCROLL_DOWN_CATCH","SCROLL_BREAK","UPSCROLL","DOWNSCROLL","SCROLL_TOP","SCROLL_TOP_BREAK","classToAdd","$ebdb5319263a18d59505b336be3ac$export$resetStyle","add","scrollDirection","target","document","querySelector","parent","parentElement","targetHeight","parentHeight","isCatchPos","$ebdb5319263a18d59505b336be3ac$export$isElmScrolledBottom","$ebdb5319263a18d59505b336be3ac$export$setActiveState","$ebdb5319263a18d59505b336be3ac$export$STATES","bottomYAxisSpace","contains","onscroll","this","oldScroll","$d4bfe31f3c0d46c344a227222269e$export$default"],"version":3,"file":"index.js.map"}