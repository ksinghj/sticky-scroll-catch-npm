{"mappings":"uBACAA,QAAQC,YAAa,mBCCwE,IACnE,SAAUC,GAChC,IAAIC,EAAeC,OAAOC,QAAUD,OAAOE,YAI3C,OAHgBJ,EAAIK,cACGH,OAAOI,YAAcN,EAAIO,wBAAwBC,KACnBP,KAIxC,SAAUD,EAAKS,QACR,IAAhBA,IAA0BA,EAAc,uBAC5CT,EAAIU,MAAMC,OAAS,KACnB,IAAK,IAAIC,EAAIZ,EAAIa,UAAUC,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAChD,IAAIG,EAAYf,EAAIa,UAAUD,GAC1BG,EAAUC,WAAWP,IACrBT,EAAIa,UAAUI,OAAOF,OAKhB,CACbG,OAAQ,CACJH,UAAW,+BACXI,SAAU,IAEdC,kBAAmB,CACfL,UAAW,gCACXI,SAAU,SAEdE,aAAc,CACVN,UAAW,6BACXI,SAAU,YAEdG,SAAU,CACNP,UAAW,gCACXI,SAAU,YAEdI,WAAY,CACRR,UAAW,kCACXI,SAAU,YAEdK,WAAY,CACRT,UAAW,oCACXI,SAAU,SAEdM,iBAAkB,CACdV,UAAW,+BACXI,SAAU,OAGG,SAAUO,EAAO1B,GAClC,IAAI2B,EAAgBC,EAAY5B,GAChC6B,EAAmB7B,GACG,SAAlB0B,EAAMP,SACNnB,EAAIU,MAAMoB,KAAOH,EAAcI,MAAQ,KAEhB,YAAlBL,EAAMP,SACXnB,EAAIU,MAAMoB,KAAOH,EAAcK,SAAW,KAG1ChC,EAAIU,MAAMoB,KAAO,GAErB9B,EAAIU,MAAMS,SAAWO,EAAMP,SAC3BnB,EAAIa,UAAUoB,IAAIP,EAAMX,YAG5B,ID9DImB,EC8DAN,EAAc,SAAU5B,GACxB,IAAI8B,EAAO9B,EAAIO,wBAAwBuB,KAGvC,MAAO,CACHC,MAAOD,EACPE,SAHMF,EADO9B,EAAImC,cAAc5B,wBAAwBuB,ODlE3DM,EAASC,SAASC,cAAc,2BAChCC,EAASH,EAAOD,cAEhBK,GAAa,EA2CjBtC,OAAOuC,SAAW,WAEdP,EAAkBQ,KAAKC,UAAYD,KAAKvC,QACxCuC,KAAKC,UAAYD,KAAKvC,eA7CF,WACpB,IAAIyC,EAAeR,EAAO/B,aAEtBwC,EAAeN,EAAOlC,aAW1B,GATIyC,EAA4BV,KAC5BW,EAAuBC,EAAe5B,kBAAmBgB,GACrDF,IACAM,GAAa,IAEjBM,EAA4BP,IAC5BQ,EAAuBC,EAAe3B,aAAce,IAGnDU,EAA4BV,IAAWF,IAAoBM,EAAY,CACxE,IAEIS,EAFaJ,EAAeD,GACJR,EAAO7B,wBAAwBC,IAAM+B,EAAOhC,wBAAwBC,KAEhGuC,EAAuBC,EAAe1B,SAAUc,GAChDA,EAAO1B,MAAMC,OAASsC,EAAmB,KACzCT,GAAa,EAGjB,IAAKN,GAAmBE,EAAOvB,UAAUqC,SAAS,uCAAyCV,EAAY,CAG/FS,EAFaJ,EAAeD,GACJR,EAAO7B,wBAAwBC,IAAM+B,EAAOhC,wBAAwBC,KAEhGuC,EAAuBC,EAAezB,WAAYa,GAClDA,EAAO1B,MAAMC,OAASsC,EAAmB,KACzCT,GAAa,EAEZN,IACDM,GAAa,GAEbJ,EAAO7B,wBAAwBC,IAAM,GAAK0B,GAC1Ca,EAAuBC,EAAexB,WAAYY,GAElDG,EAAOhC,wBAAwBC,IAAM,IACrCuC,EAAuBC,EAAe9B,OAAQkB,GAC9CA,EAAO1B,MAAMoB,KAAO,KAQ5BhC,QAAA,QAAAqD","sources":["./src/main.js","./src/utils/index.js"],"sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar utils_1 = require(\"./utils\");\nrequire(\"./index.css\");\nvar target = document.querySelector('.js-sticky-scroll-catch');\nvar parent = target.parentElement;\nvar scrollDirection;\nvar isCatchPos = false;\nvar stickyScrollCatch = function () {\n    var targetHeight = target.offsetHeight;\n    // let targetWidth: number = target.offsetWidth\n    var parentHeight = parent.offsetHeight;\n    // let parentWidth: number = parent.offsetWidth\n    if (utils_1.isElmScrolledBottom(target)) {\n        utils_1.setActiveState(utils_1.STATES.SCROLL_DOWN_CATCH, target);\n        if (scrollDirection)\n            isCatchPos = true;\n    }\n    if (utils_1.isElmScrolledBottom(parent)) {\n        utils_1.setActiveState(utils_1.STATES.SCROLL_BREAK, target);\n    }\n    // handle scroll up and 'catch' so scrolls with window\n    if (!utils_1.isElmScrolledBottom(target) && scrollDirection && !isCatchPos) {\n        var YAxisSpace = parentHeight - targetHeight;\n        var topDistanceFromParent = target.getBoundingClientRect().top - parent.getBoundingClientRect().top;\n        var bottomYAxisSpace = YAxisSpace - topDistanceFromParent;\n        utils_1.setActiveState(utils_1.STATES.UPSCROLL, target);\n        target.style.bottom = bottomYAxisSpace + \"px\";\n        isCatchPos = true;\n    }\n    // handle scroll up and 'catch' so scrolls with window DOWNSCROLL catch\n    if (!scrollDirection && target.classList.contains('sticky-scroll-catch--scrolled-top') && !isCatchPos) {\n        var YAxisSpace = parentHeight - targetHeight;\n        var topDistanceFromParent = target.getBoundingClientRect().top - parent.getBoundingClientRect().top;\n        var bottomYAxisSpace = YAxisSpace - topDistanceFromParent;\n        utils_1.setActiveState(utils_1.STATES.DOWNSCROLL, target);\n        target.style.bottom = bottomYAxisSpace + \"px\";\n        isCatchPos = true;\n    }\n    if (!scrollDirection)\n        isCatchPos = false;\n    // fix to top\n    if (target.getBoundingClientRect().top > 0 && scrollDirection) {\n        utils_1.setActiveState(utils_1.STATES.SCROLL_TOP, target);\n    }\n    if (parent.getBoundingClientRect().top > 0) {\n        utils_1.setActiveState(utils_1.STATES.INITAL, target);\n        target.style.left = ''; // in case existing styles are present (outside the module)\n    }\n};\nwindow.onscroll = function () {\n    // print \"false\" if direction is down and \"true\" if up // creds IT VLOG https://stackoverflow.com/questions/31223341/detecting-scroll-direction\n    scrollDirection = this.oldScroll > this.scrollY;\n    this.oldScroll = this.scrollY;\n};\nexports[\"default\"] = stickyScrollCatch;\n","\"use strict\";\nexports.__esModule = true;\nexports.setActiveState = exports.STATES = exports.resetStyle = exports.isElmScrolledBottom = void 0;\nvar isElmScrolledBottom = function (elm) {\n    var bottomScroll = window.scrollY + window.innerHeight;\n    var elmHeight = elm.offsetHeight;\n    var elmDistanceToTop = window.pageYOffset + elm.getBoundingClientRect().top;\n    var isScrolledToEnd = elmHeight + elmDistanceToTop < bottomScroll;\n    return isScrolledToEnd;\n};\nexports.isElmScrolledBottom = isElmScrolledBottom;\nvar resetStyle = function (elm, classPrefix) {\n    if (classPrefix === void 0) { classPrefix = 'sticky-scroll-catch'; }\n    elm.style.bottom = null;\n    for (var i = elm.classList.length - 1; i >= 0; i--) {\n        var className = elm.classList[i];\n        if (className.startsWith(classPrefix)) {\n            elm.classList.remove(className);\n        }\n    }\n};\nexports.resetStyle = resetStyle;\nexports.STATES = {\n    INITAL: {\n        className: 'sticky-scroll-catch--initial',\n        position: ''\n    },\n    SCROLL_DOWN_CATCH: {\n        className: 'sticky-scroll-catch--scrolled',\n        position: 'fixed'\n    },\n    SCROLL_BREAK: {\n        className: 'sticky-scroll-catch--break',\n        position: 'absolute'\n    },\n    UPSCROLL: {\n        className: 'sticky-scroll-catch--upscroll',\n        position: 'absolute'\n    },\n    DOWNSCROLL: {\n        className: 'sticky-scroll-catch--downscroll',\n        position: 'absolute'\n    },\n    SCROLL_TOP: {\n        className: 'sticky-scroll-catch--scrolled-top',\n        position: 'fixed'\n    },\n    SCROLL_TOP_BREAK: {\n        className: 'sticky-scroll-catch--initial',\n        position: ''\n    }\n};\nvar setActiveState = function (state, elm) {\n    var targetLeftPos = calcLeftPos(elm);\n    exports.resetStyle(elm);\n    if (state.position == 'fixed') {\n        elm.style.left = targetLeftPos.fixed + \"px\";\n    }\n    else if (state.position == 'absolute') {\n        elm.style.left = targetLeftPos.absolute + \"px\";\n    }\n    else {\n        elm.style.left = '';\n    }\n    elm.style.position = state.position;\n    elm.classList.add(state.className);\n};\nexports.setActiveState = setActiveState;\nvar calcLeftPos = function (elm) {\n    var left = elm.getBoundingClientRect().left;\n    var parentLeft = elm.parentElement.getBoundingClientRect().left;\n    var res = left - parentLeft;\n    return {\n        fixed: left,\n        absolute: res\n    };\n};\n"],"names":["exports","__esModule","elm","bottomScroll","window","scrollY","innerHeight","offsetHeight","pageYOffset","getBoundingClientRect","top","classPrefix","style","bottom","i","classList","length","className","startsWith","remove","INITAL","position","SCROLL_DOWN_CATCH","SCROLL_BREAK","UPSCROLL","DOWNSCROLL","SCROLL_TOP","SCROLL_TOP_BREAK","state","targetLeftPos","calcLeftPos","$ebdb5319263a18d59505b336be3ac$export$resetStyle","left","fixed","absolute","add","scrollDirection","parentElement","target","document","querySelector","parent","isCatchPos","onscroll","this","oldScroll","targetHeight","parentHeight","$ebdb5319263a18d59505b336be3ac$export$isElmScrolledBottom","$ebdb5319263a18d59505b336be3ac$export$setActiveState","$ebdb5319263a18d59505b336be3ac$export$STATES","bottomYAxisSpace","contains","$d4bfe31f3c0d46c344a227222269e$export$default"],"version":3,"file":"index.js.map"}